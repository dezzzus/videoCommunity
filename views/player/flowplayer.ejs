<div class="fplayer" data-ratio="0.5555555555555556">
    <video>
        <source type="video/webm" src="https://s3.amazonaws.com/vizzitvideo/<%= videoID %>.webm">
        <source type="video/mp4" src="https://s3.amazonaws.com/vizzitvideo/<%= videoID %>.mp4">
        <div>Video encoding is in progress...</div>
    </video>
</div>
<div id="video_alert" class="text-danger">
</div>

<script src="//releases.flowplayer.org/5.5.2/flowplayer.min.js"></script>
<!-- Include lines below to support multiple resolutions via quality selector plugin -->
<script src="//flowplayer.org/drive/quality-selector.js"></script>
<script src="/js/flowplayer_wrapper.js"></script>

<script type="application/javascript">
    $(function () {
        var jqDiv = $(".fplayer");
        jqDiv.flowplayer({
            errors: ['', 'Video loading aborted', 'Network error',
                'Video not properly encoded', 'Video file is optimizing for web now, wait two minutes and reload a page'],
            disabled : <%= !isPresenting %>
        });
        var flplayer = flowplayer(jqDiv);

        <% if(!isPresenting){%>
        jqDiv.find('.fp-controls').hide();
        <%}%>
        var wrapper = new SyncWrapper(flplayer);
        videoSync(wrapper, <%= isPresenting %>,
            function(presenterTS) {
                $("#video_alert").html("<h3>Another presenter became active, this session is no longer controlling playback.  If you refresh this browser window, or switch to another tour from here, you will regain control.</h3>");
            }
        );
    });
</script>